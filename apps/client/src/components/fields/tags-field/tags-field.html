@if (label()) {
<label [for]="id()" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"> {{ label() }} </label>
}

<!-- Tags container with chips and input -->
<div
  class="flex flex-wrap items-center gap-2 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm transition-colors focus-within:outline-none focus-within:ring-1 focus-within:ring-ring min-h-[2.5rem]"
>
  <!-- Chips -->
  @for (tag of tags(); track tag) {
  <span
    class="inline-flex items-center gap-1 px-2 py-1 text-sm bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-md"
  >
    {{ tag }}
    <button
      type="button"
      (click)="removeTag(tag)"
      class="flex items-center justify-center ml-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none"
      [attr.aria-label]="'タグ「' + tag + '」を削除'"
    >
      <span class="material-symbols-outlined text-sm">close</span>
    </button>
  </span>
  }

  <!-- Input field -->
  <input
    #inputRef
    [id]="id()"
    type="text"
    [value]="inputValue()"
    (input)="onInputChange($any($event.target).value)"
    (keydown)="onKeyDown($event)"
    (blur)="handleBlur()"
    placeholder="タグを入力（Enterまたはカンマで区切る）"
    class="flex-1 min-w-[120px] bg-transparent border-0 outline-none placeholder:text-muted-foreground"
  />
</div>

@if (showError()) {
<div class="mt-2 text-sm text-destructive">
  @for (message of activeErrorMessages(); track message) {
  <p>{{ message }}</p>
  }
</div>
}
