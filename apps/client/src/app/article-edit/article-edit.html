<main class="h-screen flex flex-col">
  <!-- Header -->
  <div class="flex-shrink-0 p-4 border-b border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <h1 class="text-xl font-bold text-gray-900 dark:text-gray-100">ページ編集</h1>

      <!-- Success/Error Messages -->
      @if (saveSuccess()) {
      <div class="px-4 py-2 bg-green-50 border border-green-200 rounded-md text-green-800 text-sm dark:bg-green-900/20 dark:border-green-800 dark:text-green-400">
        保存が完了しました
      </div>
      }
      @if (saveError()) {
      <div class="px-4 py-2 bg-red-50 border border-red-200 rounded-md text-red-800 text-sm dark:bg-red-900/20 dark:border-red-800 dark:text-red-400">
        {{ saveError() }}
      </div>
      }
    </div>
  </div>

  <!-- 3-Column Layout -->
  <div class="flex-1 flex min-h-0" *rxLet="pages$; let pages">
    <!-- Left: Page Sidebar -->
    <app-page-sidebar
      [pages]="pages"
      [articleId]="articleId()"
      [currentPageId]="pageId()"
    />

    <!-- Center: Markdown Editor -->
    <div class="flex-1 border-r border-gray-200 dark:border-gray-700 min-w-0" *rxIf="currentPage$">
      <app-markdown-editor
        [(title)]="title"
        [(description)]="description"
        [(content)]="content"
        [isSaving]="isSaving()"
        (save)="onSave()"
      />
    </div>

    <!-- Right: Preview Panel -->
    <div class="flex-1 min-w-0" *rxIf="currentPage$">
      <app-preview-panel [markdown]="content()" />
    </div>
  </div>
</main>
