<form [formGroup]="form" (ngSubmit)="onSubmit()" class="h-full flex flex-col">
  <!-- Header: Title and Tags -->
  <div class="space-y-4 mb-4">
    <app-input-field label="タイトル" [control]="form.controls.title">
      <input appInput formControlName="title" placeholder="記事のタイトルを入力してください" />
    </app-input-field>

    <app-input-field label="タグ（カンマ区切り）" [control]="form.controls.tagsInput">
      <input appInput formControlName="tagsInput" placeholder="例: JavaScript, Angular, TypeScript" />
    </app-input-field>
  </div>

  <!-- 2-Column Editor Layout -->
  <div class="flex-1 grid grid-cols-2 gap-4 min-h-0">
    <!-- Left: Markdown Editor -->
    <div class="flex flex-col min-h-0">
      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Markdown</label>
      <textarea
        appInput
        formControlName="content"
        class="flex-1 resize-none font-mono text-sm min-h-[400px]"
        placeholder="Markdownで記事を書いてください..."
      ></textarea>
    </div>

    <!-- Right: Preview -->
    <div class="flex flex-col min-h-0">
      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">プレビュー</label>
      <div
        class="flex-1 overflow-auto rounded-md border border-input bg-background p-4 prose prose-slate dark:prose-invert max-w-none min-h-[400px]"
        [innerHTML]="previewHtml()"
      ></div>
    </div>
  </div>

  <!-- Footer: Save Button -->
  <div class="flex justify-end mt-4">
    <button appButton type="submit" [disabled]="isSaving() || !isFormValid()">
      {{ isSaving() ? '保存中...' : '保存' }}
    </button>
  </div>
</form>
