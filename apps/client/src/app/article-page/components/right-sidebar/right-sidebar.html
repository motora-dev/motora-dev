<!-- Right sidebar: Table of Contents (見出し目次) -->
<aside class="sticky top-8 w-64 h-fit max-h-[calc(100vh-4rem)] hidden xl:block overflow-y-auto p-4">
  @if (toc().length > 0) {
  <nav #tocNav [attr.aria-label]="'articlePage.headingToc' | translate">
    <ul class="space-y-1">
      @for (item of toc(); track item.id) {
      <li [class]="getTocIndentClass(item)">
        <a
          [attr.data-toc-id]="item.id"
          [href]="'/article/' + articleId() + '/' + pageId() + '#' + item.id"
          [unpatch]="['click']"
          (click)="onTocClick($event, item)"
          class="block text-sm py-1 px-2 rounded transition-colors"
          [class.bg-blue-100]="isActive(item)"
          [class.text-blue-700]="isActive(item)"
          [class.font-medium]="isActive(item)"
          [class.text-gray-600]="!isActive(item)"
          [class.hover:text-gray-900]="!isActive(item)"
          [class.hover:bg-gray-100]="!isActive(item)"
          [attr.aria-label]="getAriaLabel(item)"
          [attr.aria-current]="isActive(item) ? 'true' : null"
        >
          {{ item.text }}
        </a>
      </li>
      }
    </ul>
  </nav>
  }
</aside>
